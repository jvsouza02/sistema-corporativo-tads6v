# REQ012 – Registrar Atendimento

**ESCOPO:** Registro dos atendimentos realizados pelo barbeiro.  
**PROPÓSITO:** Registrar serviços, produtos usados e valor final, descontando do estoque as quantidades consumidas.  
**ATOR:** Barbeiro  

---

### PRÉ-CONDIÇÕES
- Barbeiro autenticado.  
- Barbeiro vinculado a uma barbearia.  
- Serviços possuem produtos associados com quantidade padrão em ml.  
- Estoque deve ter quantidade suficiente em ml dos produtos utilizados.

### PÓS-CONDIÇÕES
- Atendimento registrado.  
- Estoque atualizado com desconto das quantidades usadas em ml.  
- Histórico de atendimento atualizado.

---

### FLUXO NORMAL
1. O barbeiro acessa sua página de agendamentos.  
2. O sistema exibe atendimentos anteriores.  
3. O barbeiro preenche o formulário informando: serviços prestados, produtos utilizados, quantidade em ml usada, valor total e comentários.  
4. O sistema valida que pelo menos um serviço foi informado.  
5. O sistema calcula automaticamente o valor total do atendimento.  
6. O sistema desconta do estoque da barbearia a quantidade utilizada de cada produto em ml.  
7. O atendimento é registrado.

---

### FLUXO DE EXCEÇÃO
- **E1 – Nenhum serviço informado:** Sistema informa erro.  
- **E2 – Produto sem quantidade suficiente no estoque:** Sistema informa erro.  
- **E3 – Valor negativo:** Sistema informa erro.  
- **E4 – Valor não informado:** Sistema informa erro.  
- **E5 – Atendimento inexistente:** Sistema informa erro.  
- **E6 – Erro ao salvar:** Sistema notifica falha.

---

### REQUISITOS RELACIONADOS
- RF012
